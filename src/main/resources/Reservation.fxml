<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.effect.Glow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox prefHeight="962.0" prefWidth="800.0" style="-fx-background-color: #141414; -fx-padding: 20;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.controller.ReservationFXController">

    <!-- Netflix-style Header with Logo -->
    <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 20 0;">
        <ImageView fitHeight="60.0" fitWidth="60.0" preserveRatio="true">
            <image>
                <Image url="@images/chechia.png" />
            </image>
            <effect>
                <Glow level="0.8">
                    <input>
                        <DropShadow color="#e50914" radius="10" spread="0.3" />
                    </input>
                </Glow>
            </effect>
        </ImageView>
        <VBox alignment="CENTER_LEFT" spacing="5">
            <Label style="-fx-text-fill: #e50914; -fx-font-size: 32px; -fx-font-weight: BOLD; -fx-font-family: 'Arial';" text="RESERVATIONS">
                <effect>
                    <DropShadow color="#e50914" radius="10" spread="0.2" />
                </effect>
            </Label>
            <Label style="-fx-text-fill: #ffffff; -fx-font-size: 18px;" text="Gestion des Réservations Premium" />
        </VBox>
    </HBox>

    <!-- Main Content Container -->
    <VBox spacing="20" style="-fx-background-color: #1a1a1a; -fx-background-radius: 8; -fx-padding: 20; -fx-border-color: #333; -fx-border-radius: 8;">
        <effect>
            <Glow level="0.1" />
        </effect>


        <!-- Data Table Section -->
        <VBox spacing="10">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-text-fill: #ffffff; -fx-font-size: 16px; -fx-font-weight: BOLD;" text="VOS RÉSERVATIONS" />
                <Button fx:id="refreshButton" onAction="#handleRefresh" style="-fx-background-color: transparent; -fx-text-fill: #e50914; -fx-font-weight: BOLD; -fx-cursor: hand;" text="⟳ Actualiser" />
            </HBox>

            <TableView fx:id="reservationTable" style="-fx-background-color: transparent; -fx-border-color: #333; -fx-border-radius: 4;">
                <columns>
                    <TableColumn fx:id="idColumn" style="-fx-text-fill: #333333; -fx-font-weight: BOLD; -fx-alignment: CENTER;" text="ID" />
                    <TableColumn fx:id="eventIdColumn" style="-fx-text-fill: #333333; -fx-alignment: CENTER;" text="ÉVÉNEMENT" />
                    <TableColumn fx:id="userIdColumn" style="-fx-text-fill: #333333; -fx-alignment: CENTER;" text="UTILISATEUR" />
                    <TableColumn fx:id="nombrePersonnesColumn" style="-fx-text-fill: #333333; -fx-alignment: CENTER;" text="PERSONNES" />
                    <TableColumn fx:id="num_telColumn" style="-fx-text-fill: #333333; -fx-alignment: CENTER;" text="TÉLÉPHONE" />
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>
                <style>
                    -fx-control-inner-background: #1a1a1a;
                    -fx-table-cell-border-color: transparent;
                    -fx-selection-bar: #e50914;
                    -fx-selection-bar-non-focused: #e50914;
                </style>
            </TableView>
        </VBox>

        <!-- Action Buttons Row -->
        <HBox alignment="CENTER" spacing="15">
            <Button fx:id="verifyButton" onAction="#handleVerifyIds" style="-fx-background-color: #e50914; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="VÉRIFIER IDs">
                <effect>
                    <Glow level="0.3" />
                </effect>
            </Button>
            <Button fx:id="generatePdfButton" onAction="#handleGeneratePdf" style="-fx-background-color: #333; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="GÉNÉRER PDF" />
            <Button fx:id="generateQrCodeButton" onAction="#handleGenerateQrCode" style="-fx-background-color: #333; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="GÉNÉRER QR CODE" />
        </HBox>

        <!-- QR Code Display Section -->
        <VBox fx:id="qrCodeContainer" alignment="CENTER" spacing="10" visible="true">
            <Label style="-fx-text-fill: #e50914; -fx-font-weight: BOLD;" text="QR CODE DE RÉSERVATION" />
            <ImageView fx:id="qrCodeImageView" fitHeight="200" fitWidth="200" preserveRatio="true" />
        </VBox>

        <!-- Form Section -->
        <VBox spacing="15">
            <Label style="-fx-text-fill: #e50914; -fx-font-size: 16px; -fx-font-weight: BOLD;" text="NOUVELLE RÉSERVATION" />
            <Separator style="-fx-background-color: #333;" />

            <GridPane hgap="15" vgap="10">
                <columnConstraints>
                    <ColumnConstraints hgrow="NEVER" prefWidth="150" />
                    <ColumnConstraints hgrow="ALWAYS" />
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints prefHeight="35" />
                    <RowConstraints prefHeight="35" />
                    <RowConstraints prefHeight="35" />
                    <RowConstraints prefHeight="35" />
                </rowConstraints>

                <!-- Row 0 -->
                <Label style="-fx-text-fill: #e50914; -fx-font-weight: BOLD;" text="ID Événement:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <TextField fx:id="eventIdField" promptText="ID de l'événement" style="-fx-background-color: #333; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 4;" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                <!-- Row 1 -->
                <Label style="-fx-text-fill: #e50914; -fx-font-weight: BOLD;" text="ID Utilisateur:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                <TextField fx:id="userIdField" promptText="ID de l'utilisateur" style="-fx-background-color: #333; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 4;" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                <!-- Row 2 -->
                <Label style="-fx-text-fill: #e50914; -fx-font-weight: BOLD;" text="Nombre de Personnes:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                <TextField fx:id="nombrePersonnesField" promptText="Nombre" style="-fx-background-color: #333; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 4;" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                <!-- Row 3 -->
                <Label style="-fx-text-fill: #e50914; -fx-font-weight: BOLD;" text="Numéro Téléphone:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                <TextField fx:id="num_telField" promptText="Numéro de téléphone" style="-fx-background-color: #333; -fx-text-fill: white; -fx-prompt-text-fill: #666; -fx-background-radius: 4;" GridPane.columnIndex="1" GridPane.rowIndex="3" />
            </GridPane>

            <!-- Form Action Buttons -->
            <HBox alignment="CENTER_RIGHT" spacing="15">
                <Button fx:id="clearButton" onAction="#handleClear" style="-fx-background-color: #333; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="EFFACER" />
                <Button fx:id="deleteButton" onAction="#handleDelete" style="-fx-background-color: #333; -fx-text-fill: #e50914; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="SUPPRIMER" />
                <Button fx:id="updateButton" onAction="#handleUpdate" style="-fx-background-color: #e50914; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="MODIFIER" />
                <Button fx:id="addButton" onAction="#handleAdd" style="-fx-background-color: #e50914; -fx-text-fill: white; -fx-font-weight: BOLD; -fx-cursor: hand; -fx-padding: 8 20;" text="AJOUTER">
                    <effect>
                        <Glow level="0.3" />
                    </effect>
                </Button>
            </HBox>
        </VBox>
    </VBox>
</VBox>
